# Steam遊戲圖標修復
## 用途：修復Steam創建的桌面快捷方式丟失(白圖標)的異常情況
## 用法：
### 方法一（內置環境，推薦）：
1、下載Release中的程序包壓縮文件（當前僅支持Windows系統），並解壓到任意目錄下。  
2、運行steam-icon-fix.exe，程序會自動彈出命令窗口並掃描Steam安裝目錄/庫目錄，然後自動下載圖標。

### 方法二（編程方法）：
1、安裝Python2.7以上或Python3.4以上的發行版本（開發時使用Python3.9/3.12兩個版本調試過，推薦嘗試）。  
2、cd到代碼文件夾所在目錄下，運行pip install -r requirements.txt，安裝幾個依賴項。  
3、執行python main.py，程序會自動彈出命令窗口並掃描Steam安裝目錄/庫目錄，然後自動下載圖標。  

### 原理：
運行前程序會通過IP檢測API（優先從國內API獲取，若失敗則回退到國際API獲取），獲取當前公共IP地址並利用GeoIP數據庫查詢國家和地區信息，自動切換相應的顯示語言（詳見Release說明）。  
1、程序首先自動按盤符字母順序掃描默認的Steam安裝目錄(每個盤符下的"Program Files (x86)/Steam", "Program Files/Steam", "Steam"文件夾)有無steam.exe文件，有則作為Steam的安裝目錄。  
2、若程序未在默認目錄下發現Steam安裝，需要用戶手動指定Steam的安裝目錄，即steam.exe文件所在文件夾，並進行校驗直到找到steam.exe文件。  
3、程序會自動掃描Steam安裝目錄下steamapps文件夾中的Steam庫配置文件libraryfolders.vdf（保存Steam庫的位置和遊戲的APPID），並讀取所有遊戲的APPID，若該文件損壞則無法修復。  
4、掃描完成後程序會自動按照APPID檢測Steam安裝目錄下steam/games文件夾中對應的遊戲圖標是否已經存在，若存在則跳過，否則在Steam網站上查詢遊戲的客戶端圖標並下載，下載完成後會提示狀態，每個程序最多嘗試5次。  

### 註意：
1、當前版本僅支持Windows系統。  
2、有些遊戲在Steam商店上架時沒有提供對應的中文名稱翻譯，因此這些遊戲將直接顯示英文名稱。  
3、如果有些應用或遊戲沒有提供客戶端圖標（很罕見，幾乎沒有），下載時將會直接跳過並提示，Steam常見再發行文件會被自動跳過且不提示  
4、建議使用代理的用戶手動配置環境變量，因為本程序基於Python編寫，因為網絡庫對代理的識別原因，默認情況下程序訪問Steam網站時大概率會出現SSL EOF錯誤8，設置方法：  
(1)Windows系統：在控製面板中打開高級系統設置（win8以上可以直接用搜索），選擇環境變量，添加兩條：變量名1：HTTP_PROXY，變量值1：包括協議的代理服務器地址；變量名2：HTTPS_PROXY，變量值2：包括協議的代理服務器地址。  
(2)註意：如果代理軟件/服務器不支持HTTPS/FTP代理，只支持HTTP/SOCKS，請將協議設置為其中之一，如Clash(CFW)，設置為"http://" 或 "socks5://"開頭的地址。  
5、修復完成之後一般刷新幾下圖標即可恢復正常，或者下載代碼/tool中的rebuild_icon_cache.bat文件重建圖標緩存。